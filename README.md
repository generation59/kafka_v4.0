# Kafka Cluster Management Project

## Описание проекта
Проект представляет собой набор инструментов и конфигураций для управления кластером Apache Kafka, включая балансировку партиций, диагностику кластера и настройку защищенного соединения.

## Структура проекта
```
.
├── infra/
│   └── docker-compose/
│       ├── docker-compose.yml
│       └── ssl/
│           ├── certificates/
│           └── config/
├── src/
│   ├── producers/
│   ├── consumers/
│   └── utils/
├── config/
│   └── kafka_config.yaml
└── README.md
```

## Требования
- Docker
- Docker Compose
- Python 3.8+
- OpenSSL (для генерации сертификатов)

## Установка и запуск

### 1. Генерация SSL сертификатов (обязательно до запуска кластера)

1. Убедитесь, что у вас установлен OpenSSL и keytool (обычно входит в JDK).
2. Проверьте наличие файла конфигурации для сертификатов: `infra/docker-compose/ssl/config/kafka_broker.cnf`.
   - Если файла нет, используйте пример из репозитория или создайте аналогичный.
3. Сгенерируйте сертификаты с помощью скрипта:

```bash
# Активируйте виртуальное окружение, если требуется
python src/utils/ssl_generator.py
```

В результате в папке `infra/docker-compose/ssl/certificates` появятся файлы:
- ca-cert.pem, ca-key.pem
- kafka-0.jks, kafka-1.jks, kafka-2.jks
- truststore.jks

**Важно:** Сертификаты должны быть сгенерированы до запуска docker-compose!

### 2. Запуск кластера Kafka
```bash
cd infra/docker-compose
docker-compose up -d
```

## Основные компоненты

### 1. Балансировка партиций
- Создание топика с 8 партициями и фактором репликации 3
- Перераспределение партиций с помощью Partition Reassignment Tools
- Диагностика и мониторинг состояния кластера

### 2. Защищенное соединение
- SSL/TLS настройка для всех брокеров
- Управление доступом (ACL) для топиков
- Безопасная передача сообщений

## Мониторинг
- Kafka UI доступен по адресу: http://localhost:8086
- Метрики и логи доступны через встроенные инструменты Kafka

## Безопасность
- Все сертификаты и ключи хранятся в директории `infra/docker-compose/ssl/certificates`
- Конфигурационный файл для генерации сертификатов: `infra/docker-compose/ssl/config/kafka_broker.cnf`
- Конфигурационные файлы с чувствительными данными исключены из системы контроля версий

## Лицензия
MIT